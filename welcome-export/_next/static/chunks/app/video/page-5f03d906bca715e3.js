(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4914],{1844:(e,t,a)=>{"use strict";a.d(t,{M:()=>s,i:()=>r});let r=[{id:"luma/ray-flash-2-540p",name:"Luma Ray Flash 2 (540p)",description:"Generates videos based on a prompt and optional start/end images.",version:"",parameters:{prompt:{type:"string",required:!0,description:"Text prompt for video generation"},start_image_url:{type:"string",required:!1,description:"URL of an image to use as the starting frame"},end_image_url:{type:"string",required:!1,description:"URL of an image to use as the ending frame"},duration:{type:"integer",default:5,description:"Duration of the video in seconds (Fixed at 5s)"},aspect_ratio:{type:"string",default:"16:9",description:"Aspect ratio of the generated video (Fixed at 16:9)"},seed:{type:"integer",required:!1,description:"Seed for reproducibility"},negative_prompt:{type:"string",required:!1,description:"Negative prompt"},guidance_scale:{type:"number",required:!1,default:7.5,description:"Guidance scale"}},default_params:{duration:5,aspect_ratio:"16:9",guidance_scale:7.5},supportsNegativePrompt:!0,supportsGuidanceScale:!0,supportsSeed:!0,supportsSteps:!1,supportsTextToVideo:!0,supportsImageToVideo:!0,maxResolution:"960x540",defaultDuration:5,defaultFPS:24,maxDuration:9,tier:"premium",status:"active"}],s=r[0]},3565:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1018).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},5585:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(8081),s=a(2149),i=a(7950),l=a.n(i),n=a(2184),o=a(7849),d=a(6955),c=a(3565),u=a(5058),p=a(3938),m=a(5160),h=a(900),x=a(7890),g=a(4666),v=a(5155),j=a(5904),y=a(4134),b=a(1888),_=a(4213),f=a(2716),w=a(4909),N=a(1844);function k(){var e,t,a,i;let{user:k,loading:A}=(0,b.A)(),{subscription:C,hasCredits:G}=(0,_.R)(),{addToHistory:S}=(0,f.W)(),P=N.M,[F,I]=(0,s.useState)({prompt:"",negative_prompt:P.defaultNegativePrompt||"",start_image_url:"",end_image_url:"",seed:void 0,guidance_scale:(null===(e=P.default_params)||void 0===e?void 0:e.guidance_scale)||7.5,aspect_ratio:"16:9"}),[V,D]=(0,s.useState)(!1),[T,E]=(0,s.useState)(null),[R,q]=(0,s.useState)(null),J=(e,t)=>{I(a=>({...a,[e]:t}))},L=(e,t)=>{I(a=>({...a,[e]:t}))},O=async e=>{var t,a;if(e.preventDefault(),q(null),E(null),!(null===(t=F.prompt)||void 0===t?void 0:t.trim())){q({type:"error",text:"Prompt cannot be empty."});return}if(!G("video")){q({type:"error",text:"No video credits left. Please upgrade your plan."});return}D(!0);try{let e={modelId:P.id,version:P.version,prompt:F.prompt,duration:5,aspect_ratio:F.aspect_ratio||"16:9"};F.negative_prompt&&(e.negative_prompt=F.negative_prompt),F.start_image_url&&(e.start_image_url=F.start_image_url),F.end_image_url&&(e.end_image_url=F.end_image_url),F.seed&&(e.seed=F.seed),F.guidance_scale&&(e.guidance_scale=F.guidance_scale),console.log("Using model: ".concat(P.name," (").concat(P.id,"), version: ").concat(P.version)),console.log("API Params:",e);let{data:{session:t},error:r}=await y.N.auth.getSession();if(r||!t){console.error("Session Error:",r),q({type:"error",text:"Could not retrieve authentication session. Please sign in again."}),D(!1);return}let s=t.access_token,i=await fetch("/api/generate-video",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)});if(!i.ok){let e=await i.json();console.error("API Error Data:",e);let t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||(null==e?void 0:e.title)||"API Error: ".concat(i.statusText);throw Error(t)}let l=await i.json();if(!l||!l.id||"starting"!==l.status&&"processing"!==l.status)throw Error((null==l?void 0:l.error)||"Failed to start generation process.");q({type:"info",text:"Generation started (ID: ".concat(l.id,"). Waiting for results...")});let n=l.id,o=null,d=0;for(;d<60;){d++;let e=null;try{let t=await fetch("/api/video-status?id=".concat(n));if(!t.ok){console.error("Polling status check failed: ".concat(t.status)),await new Promise(e=>setTimeout(e,5e3));continue}if(e=await t.json(),console.log("Poll attempt ".concat(d," for video ").concat(n,": ").concat(e.status)),"succeeded"===e.status||"failed"===e.status||"canceled"===e.status){o={...e,input:F};break}await new Promise(e=>setTimeout(e,5e3))}catch(e){console.error("Polling error:",e),q({type:"error",text:"Error checking video status: ".concat(e.message)});break}}if(D(!1),o&&"succeeded"===o.status&&o.output){E(o);let e={prompt:o.input.prompt,negative_prompt:o.input.negative_prompt,width:0,height:0,num_inference_steps:0,guidance_scale:null!==(a=o.input.guidance_scale)&&void 0!==a?a:7.5,num_images:1,aspect_ratio:F.aspect_ratio||"16:9",scheduler:"",seed:o.input.seed,model:P.id,image:void 0},t=o.output?Array.isArray(o.output)?o.output:[o.output]:null;try{await S({id:o.id,status:o.status,input:e,output:t,created_at:o.created_at||new Date().toISOString(),model:P.id},"video"),q(null)}catch(e){console.error("Failed to save to history:",e)}}else{let e="Video generation failed or timed out.";(null==o?void 0:o.status)==="failed"?e="Generation failed: ".concat(o.error||"Unknown reason"):(null==o?void 0:o.status)==="canceled"?e="Generation canceled.":d>=60&&!o&&(e="Generation timed out while waiting for results."),q({type:"error",text:e}),E(o)}}catch(e){console.error("Generation submission error:",e),q({type:"error",text:e.message||"An unexpected error occurred."}),D(!1)}};return A?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 flex items-center justify-center min-h-[60vh]",children:(0,r.jsx)(n.A,{className:"h-12 w-12 animate-spin mx-auto text-primary"})}):k?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white drop-shadow-md",children:"AI Video Generator"}),(0,r.jsx)("p",{className:"text-white/70 mt-2 max-w-2xl mx-auto",children:"Create stunning 5-second videos using the Luma Ray Flash model."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(w.GlassCard,{className:"w-full",children:[(0,r.jsxs)(w.GlassCardHeader,{children:[(0,r.jsxs)(w.GlassCardTitle,{children:["Video Generator (",P.name,")"]}),(0,r.jsxs)(w.GlassCardDescription,{children:["You have ",null!==(a=null==C?void 0:C.videoCredits)&&void 0!==a?a:0," video credits remaining. Duration: 5s."]})]}),(0,r.jsxs)("form",{onSubmit:O,children:[(0,r.jsxs)(w.GlassCardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"prompt",className:"text-white",children:"Prompt"}),(0,r.jsx)(g.T,{id:"prompt",placeholder:"Describe the video you want to create...",value:F.prompt||"",onChange:e=>J("prompt",e.target.value),className:"min-h-[80px] bg-black/20 border-white/10 text-white",required:!0})]}),P.supportsNegativePrompt&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"negative_prompt",className:"text-white",children:"Negative Prompt"}),(0,r.jsx)(g.T,{id:"negative_prompt",placeholder:"Describe what to avoid (optional)...",value:F.negative_prompt||"",onChange:e=>J("negative_prompt",e.target.value),className:"min-h-[60px] bg-black/20 border-white/10 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"aspect_ratio",className:"text-white",children:"Aspect Ratio"}),(0,r.jsxs)(j.l6,{value:F.aspect_ratio,onValueChange:e=>L("aspect_ratio",e),children:[(0,r.jsx)(j.bq,{className:"w-full bg-black/20 border-white/10 text-white",children:(0,r.jsx)(j.yv,{placeholder:"Select aspect ratio"})}),(0,r.jsxs)(j.gC,{className:"bg-gray-900/90 border-white/20 text-white backdrop-blur",children:[(0,r.jsx)(j.eb,{value:"9:16",children:"9:16 (Vertical)"}),(0,r.jsx)(j.eb,{value:"1:1",children:"1:1 (Square)"}),(0,r.jsx)(j.eb,{value:"3:4",children:"3:4"}),(0,r.jsx)(j.eb,{value:"4:3",children:"4:3"}),(0,r.jsx)(j.eb,{value:"16:9",children:"16:9 (Widescreen)"}),(0,r.jsx)(j.eb,{value:"9:21",children:"9:21"}),(0,r.jsx)(j.eb,{value:"21:9",children:"21:9 (Cinematic)"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"start_image_url",className:"text-white",children:"Start Image URL (Optional)"}),(0,r.jsx)(h.p,{id:"start_image_url",type:"url",placeholder:"https://...",value:F.start_image_url||"",onChange:e=>J("start_image_url",e.target.value),className:"bg-black/20 border-white/10 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"end_image_url",className:"text-white",children:"End Image URL (Optional)"}),(0,r.jsx)(h.p,{id:"end_image_url",type:"url",placeholder:"https://...",value:F.end_image_url||"",onChange:e=>J("end_image_url",e.target.value),className:"bg-black/20 border-white/10 text-white"})]}),P.supportsGuidanceScale&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x.J,{htmlFor:"guidance_scale",className:"text-white",children:["Guidance Scale: ",null===(t=F.guidance_scale)||void 0===t?void 0:t.toFixed(1)]}),(0,r.jsx)(v.A,{id:"guidance_scale",min:0,max:20,step:.5,value:[null!==(i=F.guidance_scale)&&void 0!==i?i:7.5],onValueChange:e=>J("guidance_scale",e[0]),className:"[&>span]:bg-primary"})]}),P.supportsSeed&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.J,{htmlFor:"seed",className:"text-white",children:"Seed (Optional)"}),(0,r.jsx)(h.p,{id:"seed",type:"number",placeholder:"Random if empty",value:F.seed||"",onChange:e=>J("seed",e.target.value?parseInt(e.target.value):void 0),className:"bg-black/20 border-white/10 text-white"})]}),!G("video")&&(0,r.jsxs)("div",{className:"!mt-6 bg-amber-900/30 border border-amber-500/30 rounded-md p-3 text-amber-200 text-sm",children:["You have no video credits left."," ",(0,r.jsx)(l(),{href:"/subscription",className:"underline font-medium",children:"Upgrade your plan?"})]})]}),(0,r.jsxs)(w.o,{className:"flex-col items-start",children:[R&&(0,r.jsxs)("div",{className:"w-full flex items-center text-sm p-3 rounded-md mb-3 ".concat("error"===R.type?"text-red-400 bg-red-900/30 border border-red-500/30":"success"===R.type?"text-green-400 bg-green-900/30 border border-green-500/30":"text-blue-400 bg-blue-900/30 border border-blue-500/30"),children:["error"===R.type&&(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),"success"===R.type&&(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),R.text]}),(0,r.jsx)(m.$,{type:"submit",className:"w-full",disabled:V||!G("video"),children:V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"})," Generating..."]}):"Generate Video"})]})]})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(w.GlassCard,{className:"w-full",children:[(0,r.jsxs)(w.GlassCardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(w.GlassCardTitle,{children:"Generated Video"}),(0,r.jsx)(w.GlassCardDescription,{children:"Your AI-generated video will appear here"})]}),(0,r.jsx)(l(),{href:"/gallery",children:(0,r.jsxs)(m.$,{variant:"outline",className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm border-white/30 text-white hover:bg-white/30",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),"View Gallery"]})})]}),(0,r.jsxs)(w.GlassCardContent,{className:"space-y-4",children:[V&&!T&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)(n.A,{className:"h-8 w-8 animate-spin text-primary mb-3"}),(0,r.jsx)("p",{className:"text-white/70",children:"Generating video, this may take a minute..."})]}),(null==T?void 0:T.status)==="succeeded"&&T.output?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg bg-black/40",children:(0,r.jsx)("video",{src:Array.isArray(T.output)?T.output[0]:T.output,controls:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain",onError:e=>console.error("Result Video Error:",e.target.error)},Array.isArray(T.output)?T.output[0]:T.output)}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 space-y-1 bg-black/20 p-3 rounded-md",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Model:"})," ",P.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Prompt:"})," ",T.input.prompt]}),T.input.negative_prompt&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Negative:"})," ",T.input.negative_prompt]}),T.input.start_image_url&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Start Image:"})," ",T.input.start_image_url]}),T.input.end_image_url&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"End Image:"})," ",T.input.end_image_url]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Duration:"})," 5s"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Aspect Ratio:"})," ",T.input.aspect_ratio||"16:9"]}),T.input.seed&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Seed:"})," ",T.input.seed]})]})]}):!V&&(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("p",{className:"text-gray-400",children:"Generate a video to see results"})}),(null==T?void 0:T.status)==="failed"&&(0,r.jsxs)("div",{className:"text-red-400 text-sm bg-red-900/30 border border-red-500/30 p-3 rounded-md",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"Generation Failed"}),(0,r.jsx)("p",{children:T.error||"An unknown error occurred during generation."})]})]}),(null==T?void 0:T.status)==="succeeded"&&T.output&&(0,r.jsxs)(w.o,{className:"flex justify-end space-x-2",children:[(0,r.jsxs)(m.$,{variant:"outline",size:"icon",className:"border-white/10 bg-black/20 text-white hover:bg-white/10",onClick:()=>{let e=Array.isArray(T.output)?T.output[0]:T.output;if(!e)return;let t=document.createElement("a");t.href=e,t.download="mrkniai-video-".concat(T.id,".mp4"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,r.jsxs)(m.$,{variant:"outline",size:"icon",className:"border-white/10 bg-black/20 text-white hover:bg-white/10",onClick:()=>{let e=Array.isArray(T.output)?T.output[0]:T.output;e&&(navigator.share?navigator.share({title:"MrkniAI Generated Video",url:e}).catch(console.error):(navigator.clipboard.writeText(e),alert("Video URL copied to clipboard!")))},children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Share"})]})]})]})})]})]}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 flex flex-col items-center min-h-[60vh] justify-center",children:(0,r.jsxs)(w.GlassCard,{className:"w-full max-w-md",children:[(0,r.jsxs)(w.GlassCardHeader,{children:[(0,r.jsx)(w.GlassCardTitle,{className:"text-white",children:"Authentication Required"}),(0,r.jsx)(w.GlassCardDescription,{className:"text-white/70",children:"Please sign in to generate videos"})]}),(0,r.jsx)(w.GlassCardContent,{className:"flex justify-center",children:(0,r.jsx)(l(),{href:"/",children:(0,r.jsx)(m.$,{children:"Go to Sign In"})})})]})})}},6955:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1018).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7437:(e,t,a)=>{Promise.resolve().then(a.bind(a,5585))},7849:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1018).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[1144,928,7950,8139,9748,1624,6705,7201,497,954,7358],()=>t(7437)),_N_E=e.O()}]);