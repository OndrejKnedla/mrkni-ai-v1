(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9302],{1215:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u,oR:()=>m});var a=s(2149);let r=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},2184:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1018).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2486:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1018).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4039:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1018).A)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])},4909:(e,t,s)=>{"use strict";s.d(t,{GlassCard:()=>l,GlassCardContent:()=>o,GlassCardDescription:()=>c,GlassCardHeader:()=>n,GlassCardTitle:()=>d,o:()=>m});var a=s(8081),r=s(6810),i=s(7687);function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.Zp,{className:(0,i.cn)("glass-card",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)(r.aR,{className:(0,i.cn)("text-on-bg",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.ZB,{className:(0,i.cn)("text-on-bg",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.BT,{className:(0,i.cn)("text-white/70",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(r.Wu,{className:(0,i.cn)(t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(r.wL,{className:(0,i.cn)(t),...s})}},5913:(e,t,s)=>{Promise.resolve().then(s.bind(s,7861))},6810:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>n,wL:()=>m});var a=s(8081),r=s(2149),i=s(7687);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})});m.displayName="CardFooter"},7861:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(8081),r=s(2149),i=s(5160),l=s(1888),n=s(2716),d=s(2184),c=s(4039),o=s(2486),m=s(1215),u=s(4909);function x(){let{user:e,loading:t}=(0,l.A)(),{history:s,loading:x,refreshHistory:h}=(0,n.W)(),[p,f]=(0,r.useState)(""),[g,j]=(0,r.useState)(!1),{toast:N}=(0,m.dj)(),y=async()=>{if(e)try{j(!0);let e=await fetch("/api/debug-images");if(!e.ok)throw Error("Failed to fix image URLs");let t=await e.json();N({title:"Image URLs Fixed",description:"Fixed ".concat(t.fixedUrls," image URLs out of ").concat(t.images," total images."),duration:5e3}),await h()}catch(e){console.error("Error fixing image URLs:",e),N({title:"Error",description:"Failed to fix image URLs. See console for details.",variant:"destructive",duration:5e3})}finally{j(!1)}};return((0,r.useEffect)(()=>{s.length>0?f(JSON.stringify(s.map(e=>({id:e.id,type:e.type,model:e.model,input_model:e.input.model,created_at:e.created_at,output:e.output,status:e.status})),null,2)):f("No history items found")},[s]),t||x)?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)(d.A,{className:"h-12 w-12 animate-spin mx-auto text-primary"})}):e?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)(u.GlassCard,{className:"w-full",children:[(0,a.jsxs)(u.GlassCardHeader,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(u.GlassCardTitle,{children:"Debug Information"}),(0,a.jsx)(u.GlassCardDescription,{children:"Raw history data for debugging"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:y,disabled:g,className:"text-white hover:bg-white/10",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Fixing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Fix Image URLs"]})}),(0,a.jsxs)(i.$,{variant:"ghost",size:"icon",onClick:h,className:"text-white hover:bg-white/10",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Refresh"})]})]})]}),(0,a.jsxs)(u.GlassCardContent,{children:[(0,a.jsx)("div",{className:"bg-black/20 p-4 rounded-md overflow-auto max-h-[70vh]",children:(0,a.jsx)("pre",{className:"text-xs text-white",children:p})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"text-white font-medium mb-2",children:["History Items: ",s.length]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-md",children:[(0,a.jsxs)("h4",{className:"text-white font-medium",children:["Item ",t+1,": ",e.id.substring(0,8),"..."]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Type: ",e.type||"unknown"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Model: ",e.model||e.input.model]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Status: ",e.status]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Created: ",new Date(e.created_at).toLocaleString()]}),e.output&&e.output.length>0?(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"Output URLs:"}),(0,a.jsx)("ul",{className:"text-xs text-gray-400 list-disc pl-4 mt-1 space-y-1",children:e.output.map((e,t)=>(0,a.jsxs)("li",{className:"break-all",children:[e.substring(0,50),"..."]},t))})]}):(0,a.jsx)("p",{className:"text-sm text-red-400 mt-2",children:"No output URLs"})]},e.id))})]})]})]})}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 flex flex-col items-center min-h-[60vh] justify-center",children:(0,a.jsx)(u.GlassCard,{className:"w-full max-w-md",children:(0,a.jsxs)(u.GlassCardHeader,{children:[(0,a.jsx)(u.GlassCardTitle,{children:"Authentication Required"}),(0,a.jsx)(u.GlassCardDescription,{children:"Please sign in to view debug information"})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1144,928,6705,497,954,7358],()=>t(5913)),_N_E=e.O()}]);