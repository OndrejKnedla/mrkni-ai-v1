(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{838:(e,t,i)=>{"use strict";i.d(t,{g:()=>l});var r=i(8081),s=i(1580),a=i(4997),n=i(7950),c=i.n(n),o=i(7687);function l(e){let{className:t}=e;return(0,r.jsxs)(c(),{href:"/",className:"flex items-center space-x-2 text-white",children:[(0,r.jsx)(a.A,{className:"h-7 w-7 text-emerald-400"}),(0,r.jsx)("span",{className:(0,o.cn)("font-bold text-xl",t),children:s.CQ.name})]})}},1580:(e,t,i)=>{"use strict";i.d(t,{CQ:()=>r,aY:()=>s});let r={name:"MrkniAI",description:"Generate stunning images and videos with the MrkniAI AI generator, using multiple advanced AI models.",url:"https://mrkniai.com",ogImage:"https://mrkniai.com/og.jpg",links:{github:"https://github.com/mrkniai/mrkniai",twitter:"https://twitter.com/mrkniai"}},s={models:[{id:"stability-ai/stable-diffusion-3.5-large",name:"Stable Diffusion 3.5 Large",provider:"Stability AI",description:"A text-to-image model that generates high-resolution images with fine details.",strengths:["High-resolution images","Fine details","Artistic styles"],tier:"premium",version:"9e5a3b2e2c1a7b9b67b9e9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9",maxDimension:1536,supportsNegativePrompt:!0},{id:"google/imagen-3",name:"Imagen 3",provider:"Google",description:"Google's advanced text-to-image model with excellent quality and prompt following.",strengths:["Photorealistic images","Excellent prompt adherence","High detail"],tier:"premium",version:"2a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"luma/photon",name:"Photon",provider:"Luma AI",description:"A high-quality image generation model with excellent photorealism.",strengths:["Photorealistic images","Natural lighting","Detailed textures"],tier:"premium",version:"1a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"black-forest-labs/flux-1.1-pro-ultra",name:"Flux 1.1 Pro Ultra",provider:"Black Forest Labs",description:"The most powerful Flux model with excellent image quality and prompt adherence.",strengths:["Photorealistic images","Excellent prompt adherence","High detail"],tier:"premium",version:"2f09c9c0d2a6f0a5b4c9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"ideogram-ai/ideogram-v2",name:"Ideogram v2",provider:"Ideogram AI",description:"An excellent image model with state of the art inpainting, prompt comprehension and text rendering.",strengths:["Text rendering","Prompt comprehension","Inpainting"],tier:"premium",version:"4a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"google/imagen-3-fast",name:"Imagen 3 Fast",provider:"Google",description:"A faster version of Google's Imagen 3 model with excellent quality and prompt following.",strengths:["Fast generation","Good prompt adherence","High quality"],tier:"premium",version:"8b5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"luma/photon-flash",name:"Photon Flash",provider:"Luma AI",description:"A faster version of Photon with excellent photorealism and quick generation times.",strengths:["Fast generation","Photorealistic images","Natural lighting"],tier:"premium",version:"7b5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"stability-ai/stable-diffusion-3.5-medium",name:"Stable Diffusion 3.5 Medium",provider:"Stability AI",description:"A balanced text-to-image model with good quality and reasonable generation speed.",strengths:["Good quality images","Balanced performance","Artistic styles"],tier:"basic",version:"6e5a3b2e2c1a7b9b67b9e9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9",maxDimension:1024,supportsNegativePrompt:!0},{id:"stability-ai/stable-diffusion-3.5-large-turbo",name:"Stable Diffusion 3.5 Large Turbo",provider:"Stability AI",description:"A faster version of SD 3.5 Large with excellent generation speed.",strengths:["Fast generation","Good quality","Artistic styles"],tier:"basic",version:"5e5a3b2e2c1a7b9b67b9e9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9b9",maxDimension:1024,supportsNegativePrompt:!0},{id:"black-forest-labs/flux-1.1-pro",name:"Flux 1.1 Pro",provider:"Black Forest Labs",description:"High-quality image generation with excellent prompt adherence.",strengths:["Photorealistic images","Good prompt adherence","Detailed outputs"],tier:"basic",version:"8a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"black-forest-labs/flux-pro",name:"Flux Pro",provider:"Black Forest Labs",description:"State-of-the-art image generation with top of the line prompt following.",strengths:["Visual quality","Image detail","Output diversity"],tier:"basic",version:"7a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"ideogram-ai/ideogram-v2-turbo",name:"Ideogram v2 Turbo",provider:"Ideogram AI",description:"A fast image model with state of the art inpainting, prompt comprehension and text rendering.",strengths:["Fast generation","Text rendering","Prompt comprehension"],tier:"basic",version:"3a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"recraft-ai/recraft-v3",name:"Recraft v3",provider:"Recraft AI",description:"A text-to-image model with the ability to generate long texts and images in a wide list of styles.",strengths:["Wide style range","Text generation","Creative compositions"],tier:"basic",version:"0a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"recraft-ai/recraft-v3-svg",name:"Recraft v3 SVG",provider:"Recraft AI",description:"A specialized model for generating SVG vector graphics from text descriptions.",strengths:["Vector graphics","Scalable images","Clean designs"],tier:"basic",version:"9a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"minimax/image-01",name:"MiniMax Image-01",provider:"MiniMax",description:"A versatile text-to-image model with good quality and reasonable generation speed.",strengths:["Versatile generation","Good quality","Fast inference"],tier:"basic",version:"4b5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:1024,supportsNegativePrompt:!0},{id:"black-forest-labs/flux-dev",name:"Flux Dev",provider:"Black Forest Labs",description:"A 12 billion parameter model capable of generating images from text descriptions.",strengths:["Fast generation","Good for iterative development"],tier:"basic",version:"6a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:768,supportsNegativePrompt:!0},{id:"black-forest-labs/flux-schnell",name:"Flux Schnell",provider:"Black Forest Labs",description:"The fastest image generation model tailored for local development and personal use.",strengths:["Very fast generation","Good for quick iterations"],tier:"free",version:"5a5c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9c8c9f9",maxDimension:768,defaultSteps:4,supportsNegativePrompt:!0,additionalParams:{maxSteps:4}}],defaultModel:"black-forest-labs/flux-schnell",defaultDimensions:[{label:"512x512",value:"512x512"},{label:"768x768",value:"768x768"},{label:"1024x1024",value:"1024x1024"},{label:"1536x1536",value:"1536x1536"}],defaultSteps:30,defaultGuidance:7.5,defaultNumImages:1,schedulers:[{label:"DPM++ 2M Karras",value:"DPM++ 2M Karras"},{label:"DPM++ SDE Karras",value:"DPM++ SDE Karras"},{label:"Euler a",value:"Euler a"}]}},2021:(e,t,i)=>{"use strict";i.d(t,{LayoutWrapper:()=>V});var r=i(8081),s=i(9651),a=i(838),n=i(5160),c=i(2149),o=i(1592),l=i(3602),d=i(6722),m=i(8022),f=i(7687);let h=o.bL,p=o.l9;o.YJ,o.ZL,o.Pb,o.z6,c.forwardRef((e,t)=>{let{className:i,inset:s,children:a,...n}=e;return(0,r.jsxs)(o.ZP,{ref:t,className:(0,f.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",i),...n,children:[a,(0,r.jsx)(l.A,{className:"ml-auto"})]})}).displayName=o.ZP.displayName,c.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,r.jsx)(o.G5,{ref:t,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...s})}).displayName=o.G5.displayName;let u=c.forwardRef((e,t)=>{let{className:i,sideOffset:s=4,...a}=e;return(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{ref:t,sideOffset:s,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...a})})});u.displayName=o.UC.displayName;let g=c.forwardRef((e,t)=>{let{className:i,inset:s,...a}=e;return(0,r.jsx)(o.q7,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",i),...a})});g.displayName=o.q7.displayName,c.forwardRef((e,t)=>{let{className:i,children:s,checked:a,...n}=e;return(0,r.jsxs)(o.H_,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),checked:a,...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),s]})}).displayName=o.H_.displayName,c.forwardRef((e,t)=>{let{className:i,children:s,...a}=e;return(0,r.jsxs)(o.hN,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(m.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=o.hN.displayName;let x=c.forwardRef((e,t)=>{let{className:i,inset:s,...a}=e;return(0,r.jsx)(o.JU,{ref:t,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",i),...a})});x.displayName=o.JU.displayName;let b=c.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,r.jsx)(o.wv,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",i),...s})});b.displayName=o.wv.displayName;var v=i(1888),w=i(6546),y=i(1107),N=i(2320),j=i(18),A=i(3585),P=i(1100),k=i(1441),M=i(5186),D=i(7950),E=i.n(D),I=i(3849);function S(){var e;let{user:t,signOut:i}=(0,v.A)(),s=(null==t?void 0:t.email)&&(I.env.NEXT_PUBLIC_ADMIN_EMAILS||"").split(",").map(e=>e.trim()).includes(t.email);if(!t)return null;let a=(null===(e=t.user_metadata)||void 0===e?void 0:e.avatar_url)||null;return(0,r.jsxs)(h,{children:[(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(n.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full overflow-hidden",children:a?(0,r.jsx)(M.default,{src:a||"/placeholder.svg",alt:"User avatar",fill:!0,className:"object-cover"}):(0,r.jsx)(w.A,{className:"h-5 w-5"})})}),(0,r.jsxs)(u,{className:"w-56",align:"end",forceMount:!0,children:[(0,r.jsx)(x,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:"Account"}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(E(),{href:"/subscription",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Subscription"})]})}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{}),(0,r.jsx)(x,{className:"font-normal",children:(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:"Admin"})}),(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(E(),{href:"/api/admin/create-tables",children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Create Tables"})]})}),(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(E(),{href:"/admin/users",children:[(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Manage Users"})]})}),(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(E(),{href:"/admin/interested-users",children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Launch Registrations"})]})}),(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(E(),{href:"/admin/credits",children:[(0,r.jsx)(P.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Manage Credits"})]})})]}),(0,r.jsx)(b,{}),(0,r.jsxs)(g,{onClick:()=>i(),children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Log out"})]})]})]})}var q=i(8822),F=i(9451),_=i(3565),C=i(1794),L=i(7188),z=i(6336);function R(){let e=(0,s.usePathname)(),{user:t}=(0,v.A)(),[i,a]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{if(t)try{let e=await fetch("/api/admin/check-access");if(e.ok){let t=await e.json();a(t.isAdmin||!1)}}catch(e){console.error("Error checking admin status:",e)}})()},[t]);let n=[{name:"Home",href:"/",icon:(0,r.jsx)(q.A,{className:"h-5 w-5 mr-2"})},{name:"Images",href:"/images",icon:(0,r.jsx)(F.A,{className:"h-5 w-5 mr-2"})},{name:"Gallery",href:"/gallery",icon:(0,r.jsx)(F.A,{className:"h-5 w-5 mr-2"})},{name:"Video",href:"/video",icon:(0,r.jsx)(_.A,{className:"h-5 w-5 mr-2"})},{name:"Subscription",href:"/subscription",icon:(0,r.jsx)(P.A,{className:"h-5 w-5 mr-2"})},{name:"Usage Guide",href:"/usage-guide",icon:(0,r.jsx)(C.A,{className:"h-5 w-5 mr-2"})},{name:"Coming Soon",href:"/coming-soon",icon:(0,r.jsx)(L.A,{className:"h-5 w-5 mr-2"})}];return i&&n.push({name:"Admin",href:"/admin/subscriptions",icon:(0,r.jsx)(z.A,{className:"h-5 w-5 mr-2"})}),(0,r.jsx)("nav",{className:"flex items-center space-x-6 overflow-x-auto pb-2 scrollbar-hide",children:n.map(t=>(0,r.jsxs)(E(),{href:t.href,className:(0,f.cn)("flex items-center text-base font-medium transition-colors hover:text-primary whitespace-nowrap",e===t.href||e.startsWith(t.href+"/")?"text-primary":"text-muted-foreground"),children:[t.icon,t.name]},t.href))})}var T=i(1580),G=i(3809);function V(e){let{children:t}=e,i="/welcome"===(0,s.usePathname)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G.H,{}),(0,r.jsxs)("div",{className:"relative min-h-screen flex flex-col z-10 pointer-events-none",children:[(0,r.jsx)("header",{className:"border-b border-white/10 bg-black/30 backdrop-blur-md pointer-events-auto",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-5 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,r.jsx)(a.g,{className:"text-2xl"}),(0,r.jsx)(R,{})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)(S,{})})]})}),(0,r.jsx)("main",{className:"".concat(i?"":"flex-1"," pointer-events-auto"),children:t}),(0,r.jsxs)("footer",{className:"border-t border-white/10 py-12 bg-black/30 backdrop-blur-md pointer-events-auto",children:[" ",(0,r.jsxs)("div",{className:"container mx-auto px-4 text-center text-base text-gray-300",children:[" ",(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," ",T.CQ.name,". All rights reserved."]})]})]})]})]})}},3809:(e,t,i)=>{"use strict";i.d(t,{H:()=>a});var r=i(8081),s=i(2149);function a(){let e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=e.current;if(!t)return;let i=t.getContext("2d");if(!i)return;let r=()=>{t.width=window.innerWidth,t.height=window.innerHeight};r(),window.addEventListener("resize",r);class s{update(){this.x+=this.speedX,this.y+=this.speedY,this.x>t.width?this.x=0:this.x<0&&(this.x=t.width),this.y>t.height?this.y=0:this.y<0&&(this.y=t.height)}draw(){i.fillStyle=this.color,i.beginPath(),i.arc(this.x,this.y,this.size,0,2*Math.PI),i.fill()}constructor(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.baseSize=5*Math.random()+1,this.size=this.baseSize,this.speedX=(3*Math.random()-1.5)*.25,this.speedY=(3*Math.random()-1.5)*.25,this.color="hsla(".concat(60*Math.random()+120,", 80%, 50%, 0.8)")}}let a=[],n=Math.min(100,Math.floor(t.width*t.height/9e3));for(let e=0;e<n;e++)a.push(new s);function c(e){let t=e.clientX,i=e.clientY;if(.3>Math.random()){let e=new s;e.x=t,e.y=i,e.size=3*Math.random()+2,e.color="hsla(".concat(60*Math.random()+120,", 90%, 60%, 0.9)"),e.speedX=(3*Math.random()-1.5)*.25,e.speedY=(3*Math.random()-1.5)*.25,a.push(e),a.length>n+20&&a.splice(0,1)}}function o(e){!function(e,t){for(let i=0;i<8;i++){let i=Math.random()*Math.PI*2,r=5*Math.random()+2,c=4*Math.random()+2,o=new s;o.x=e,o.y=t,o.size=c,o.speedX=Math.cos(i)*r*.25,o.speedY=Math.sin(i)*r*.25,o.color="hsla(".concat(60*Math.random()+120,", 100%, 70%, 0.9)"),a.push(o),a.length>n+50&&a.splice(0,8)}}(e.clientX,e.clientY)}return function e(){i.clearRect(0,0,t.width,t.height);for(let e=0;e<a.length;e++)a[e].update(),a[e].draw();(function(){for(let e=0;e<a.length;e++)for(let t=e;t<a.length;t++){let r=a[e].x-a[t].x,s=a[e].y-a[t].y,n=Math.sqrt(r*r+s*s);if(n<150){let r=1-n/150;i.strokeStyle="rgba(100, 255, 150, ".concat(.4*r,")"),i.lineWidth=1,i.beginPath(),i.moveTo(a[e].x,a[e].y),i.lineTo(a[t].x,a[t].y),i.stroke()}}})(),requestAnimationFrame(e)}(),window.addEventListener("mousemove",c),window.addEventListener("click",o),()=>{window.removeEventListener("resize",r),window.removeEventListener("mousemove",c),window.removeEventListener("click",o)}},[]),(0,r.jsx)("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full -z-10 bg-gradient-to-br from-emerald-900 via-teal-800 to-green-900 pointer-events-auto"})}},4213:(e,t,i)=>{"use strict";i.d(t,{R:()=>f,SubscriptionProvider:()=>m});var r=i(8081),s=i(2149),a=i(1888),n=i(4134);let c={basic:"price_1RDqFlRqLoid5jEQzUlyWITJ",pro:"price_1RDqFlRqLoid5jEQproTierPriceID",premium:"price_1RDqFlRqLoid5jEQlynXnhew"},o={tier:"free",active:!0,expiresAt:null,credits:50,creditDiscount:0,aiVersion:"1.0"},l=[{id:"free",name:"Free",description:"Basic access with limited generations",price:0,features:["50 credits","Access to MrkniAI 1.0","Community support","Standard quality"],tier:"free",credits:50,creditDiscount:0,aiVersion:"1.0"},{id:"basic",name:"Basic",description:"More generations with higher quality",price:9.99,features:["1250 credits monthly","10% credit savings","Access to MrkniAI 1.0","Priority support","High quality"],tier:"basic",credits:1250,creditDiscount:10,aiVersion:"1.0"},{id:"premium",name:"Premium",description:"Advanced generations with premium quality",price:29.99,features:["4000 credits monthly","20% credit savings","Access to MrkniAI 1.5","Priority support","Premium quality","Early access to new features"],tier:"premium",credits:4e3,creditDiscount:20,aiVersion:"1.5"},{id:"pro",name:"Pro",description:"Professional generations with highest quality",price:49.99,features:["10000 credits monthly","40% credit savings","Access to MrkniAI 2.0 and 2.5","Priority support","Highest quality","Access to exclusive models"],tier:"pro",credits:1e4,creditDiscount:40,aiVersion:"2.0, 2.5"}],d=(0,s.createContext)(void 0);function m(e){let{children:t}=e,{user:i}=(0,a.A)(),[m,f]=(0,s.useState)(null),[h,p]=(0,s.useState)(!0);(0,s.useEffect)(()=>{i?u():(f(o),p(!1))},[i]);let u=async()=>{try{if(p(!0),!i){f(o);return}let{data:e,error:t}=await n.N.from("subscriptions").select("*").eq("user_id",i.id).eq("status","active").order("created_at",{ascending:!1}).limit(1).single();if(t&&"PGRST116"!==t.code)throw console.error("Error fetching subscription:",t),t;let r=null,s=null;try{let{data:e,error:t}=await n.N.from("credits").select("*").eq("user_id",i.id).single();r=e,s=t}catch(e){console.error("Exception fetching credits:",e),s=e}if(s){console.error("Error fetching credits:",s);try{console.log("Attempting to initialize credits...");let e=await fetch("/api/user/initialize-credits",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();if(console.log("Credits initialization result:",t),t.initialized){let{data:e,error:t}=await n.N.from("credits").select("*").eq("user_id",i.id).single();t||(r=e,s=null)}}else console.error("Failed to initialize credits:",await e.json())}catch(e){console.error("Error initializing credits:",e)}}if(s&&(console.warn("Using default credits after initialization attempt failed"),r={credits:50}),e){let t=e.tier,i=l.find(e=>e.tier===t)||l[0];f({tier:t,active:!0,expiresAt:e.current_period_end,credits:(null==r?void 0:r.credits)||i.credits,creditDiscount:i.creditDiscount,aiVersion:i.aiVersion})}else if(r){let e=l.find(e=>"free"===e.tier)||l[0];f({tier:"free",active:!0,expiresAt:null,credits:r.credits,creditDiscount:e.creditDiscount,aiVersion:e.aiVersion})}else f(o)}catch(e){console.error("Error fetching subscription:",e),f(o)}finally{p(!1)}},g=async e=>{try{if(!i)throw Error("User not authenticated");let t=l.find(t=>t.id===e);if(!t)throw Error("Invalid plan selected");let r=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:c[t.tier]})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create subscription")}await u()}catch(e){console.error("Error subscribing to plan:",e),alert(e instanceof Error?e.message:"Failed to subscribe to plan")}},x=async()=>{try{if(!i)throw Error("User not authenticated");let{data:e,error:t}=await n.N.from("subscriptions").select("id").eq("user_id",i.id).eq("status","active").single();if(t)throw Error("No active subscription found");let r=await fetch("/api/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e.id})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to cancel subscription")}await u()}catch(e){console.error("Error canceling subscription:",e),alert(e instanceof Error?e.message:"Failed to cancel subscription")}},b=async()=>{await u()},v=e=>m?Math.max(0,Math.round(e*(1-m.creditDiscount/100))):e,w=async e=>{try{if(!i||!m)return!1;let t=v(e);if(m.credits<t)return!1;let{data:r,error:s}=await n.N.rpc("decrement_credits",{p_user_id:i.id,p_amount:t});if(s)return console.error("Error using credits:",s),!1;if(!0===r)return f({...m,credits:m.credits-t}),!0;return!1}catch(e){return console.error("Error using credits:",e),!1}};return(0,r.jsx)(d.Provider,{value:{subscription:m,loading:h,plans:l,subscribe:g,cancelSubscription:x,refreshSubscription:b,hasCredits:()=>!!m&&m.credits>0,useCredit:w,calculateDiscountedCredits:v},children:t})}let f=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}},4633:(e,t,i)=>{"use strict";i.d(t,{ThemeProvider:()=>n});var r=i(8081),s=i(2149);let a=(0,s.createContext)({theme:"dark",setTheme:()=>null});function n(e){let{children:t,defaultTheme:i="dark"}=e,[n,c]=(0,s.useState)(i);return(0,s.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===n){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t);return}e.classList.add(n)},[n]),(0,r.jsx)(a.Provider,{value:{theme:n,setTheme:e=>{localStorage.setItem("theme",e),c(e)}},children:t})}},5740:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,6146,23)),Promise.resolve().then(i.bind(i,2021)),Promise.resolve().then(i.bind(i,1888)),Promise.resolve().then(i.bind(i,2716)),Promise.resolve().then(i.bind(i,4213)),Promise.resolve().then(i.bind(i,4633)),Promise.resolve().then(i.bind(i,6505)),Promise.resolve().then(i.t.bind(i,8175,23)),Promise.resolve().then(i.t.bind(i,366,23))},6146:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[4047,1144,928,7950,5186,8139,2587,6705,497,954,7358],()=>t(5740)),_N_E=e.O()}]);