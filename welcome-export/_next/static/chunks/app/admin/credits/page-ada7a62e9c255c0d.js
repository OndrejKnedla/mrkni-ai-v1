(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3343],{1601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(8081),i=s(2149),a=s(5160),n=s(6810),l=s(4909),c=s(2184),d=s(9076),o=s(7849),u=s(1888),h=s(3484),x=s(7687);let m=(0,h.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=i.forwardRef((e,t)=>{let{className:s,variant:i,...a}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,x.cn)(m({variant:i}),s),...a})});f.displayName="Alert";let g=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("h5",{ref:t,className:(0,x.cn)("mb-1 font-medium leading-none tracking-tight",s),...i})});g.displayName="AlertTitle";let p=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,x.cn)("text-sm [&_p]:leading-relaxed",s),...i})});function v(){let{user:e,loading:t}=(0,u.A)(),[s,h]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),v=async()=>{if(confirm("Are you sure you want to add 1250 credits to all active users? This action cannot be undone.")){h(!0),m(null);try{let e=await fetch("/api/admin/add-monthly-credits",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();e.ok?m({success:!0,message:t.message||"Successfully added monthly credits"}):m({success:!1,message:t.error||"Failed to add monthly credits"})}catch(e){m({success:!1,message:"An unexpected error occurred"})}finally{h(!1)}}};return t?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.A,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),(0,r.jsx)("p",{className:"mt-4 text-white drop-shadow-md",children:"Loading..."})]})}):e?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white drop-shadow-md mb-8 text-center",children:"Admin Credit Management"}),(0,r.jsxs)("div",{className:"grid gap-8 max-w-4xl mx-auto",children:[(0,r.jsxs)(l.GlassCard,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"text-white",children:"Add Monthly Credits"}),(0,r.jsx)(n.BT,{className:"text-white/70",children:"Add monthly credits to users based on their subscription tier."})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsxs)("p",{className:"text-white/80 mb-4",children:["This action will add monthly credits to all users with active subscriptions based on their tier:",(0,r.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"Basic: +1250 credits"}),(0,r.jsx)("li",{children:"Premium: +4000 credits"}),(0,r.jsx)("li",{children:"Pro: +10000 credits"})]}),"This is typically done once per month."]}),x&&(0,r.jsxs)(f,{className:x.success?"bg-green-900/20":"bg-red-900/20",variant:"default",children:[x.success?(0,r.jsx)(d.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,r.jsx)(g,{className:x.success?"text-green-500":"text-red-500",children:x.success?"Success":"Error"}),(0,r.jsx)(p,{className:"text-white/80",children:x.message})]})]}),(0,r.jsx)(n.wL,{children:(0,r.jsx)(a.$,{onClick:v,disabled:s,className:"w-full",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Add Monthly Credits"})})]}),(0,r.jsxs)(l.GlassCard,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"text-white",children:"Credit System Information"}),(0,r.jsx)(n.BT,{className:"text-white/70",children:"Information about the credit system."})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Monthly Credit Addition"}),(0,r.jsx)("p",{className:"text-white/80",children:"Each month, users receive additional credits based on their subscription tier:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-white/80",children:[(0,r.jsx)("li",{children:"Basic: +1250 credits per month"}),(0,r.jsx)("li",{children:"Premium: +4000 credits per month"}),(0,r.jsx)("li",{children:"Pro: +10000 credits per month"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Credit Allocation by Tier"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-2 text-white/80",children:[(0,r.jsx)("li",{children:"Free: 50 initial credits"}),(0,r.jsx)("li",{children:"Basic: 1250 initial credits + 1250 monthly credits"}),(0,r.jsx)("li",{children:"Premium: 4000 initial credits + 4000 monthly credits"}),(0,r.jsx)("li",{children:"Pro: 10000 initial credits + 10000 monthly credits"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Credit Savings by Tier"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-2 text-white/80",children:[(0,r.jsx)("li",{children:"Free: No savings (100 credits used = 100 credits deducted)"}),(0,r.jsx)("li",{children:"Basic: 10% savings (100 credits used = 90 credits deducted)"}),(0,r.jsx)("li",{children:"Premium: 20% savings (100 credits used = 80 credits deducted)"}),(0,r.jsx)("li",{children:"Pro: 40% savings (100 credits used = 60 credits deducted)"})]})]})]})})]})]})]}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(l.GlassCard,{children:(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"text-white",children:"Unauthorized"}),(0,r.jsx)(n.BT,{className:"text-white/70",children:"You must be logged in to access this page."})]})})})}p.displayName="AlertDescription"},1888:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>l});var r=s(8081),i=s(2149),a=s(4134);let n=(0,i.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await a.N.auth.getSession();l((null==e?void 0:e.user)||null)}catch(e){console.error("Error checking session:",e)}finally{d(!1)}})();let{data:{subscription:e}}=a.N.auth.onAuthStateChange((e,t)=>{l((null==t?void 0:t.user)||null)});return()=>{e.unsubscribe()}},[]);let o=async()=>{try{console.log("Starting Google sign-in process...");let e="".concat(window.location.protocol,"//").concat(window.location.host);console.log("Using base URL for redirect: ".concat(e));let{data:t,error:s}=await a.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(e,"/auth/callback"),queryParams:{access_type:"offline",prompt:"consent"},scopes:"email profile"}});if(s)throw console.error("Google sign-in error:",s),s;console.log("Sign in initiated successfully, redirecting to Google",t)}catch(e){throw console.error("Error in signInWithGoogle:",e),e}},u=async(e,t)=>{let{error:s}=await a.N.auth.signInWithPassword({email:e,password:t});if(s)throw s},h=async(e,t)=>{let{error:s}=await a.N.auth.signUp({email:e,password:t});if(s)throw s},x=async()=>{let{error:e}=await a.N.auth.signOut();if(e)throw e};return(0,r.jsx)(n.Provider,{value:{user:s,loading:c,signInWithGoogle:o,signIn:u,signUp:h,signOut:x},children:t})}let c=()=>{let e=(0,i.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2184:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1018).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4134:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(5331).createBrowserClient)("https://akqpnxofeitmzittndll.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrcXBueG9mZWl0bXppdHRuZGxsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxMzcxMjYsImV4cCI6MjA1OTcxMzEyNn0.vVH5D_odlSVOCOZ3BHfkxbDvhuOd_S3e05bQHqUR_pc",{})},4701:(e,t,s)=>{Promise.resolve().then(s.bind(s,1601))},4909:(e,t,s)=>{"use strict";s.d(t,{GlassCard:()=>n,GlassCardContent:()=>o,GlassCardDescription:()=>d,GlassCardHeader:()=>l,GlassCardTitle:()=>c,o:()=>u});var r=s(8081),i=s(6810),a=s(7687);function n(e){let{className:t,...s}=e;return(0,r.jsx)(i.Zp,{className:(0,a.cn)("glass-card",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)(i.aR,{className:(0,a.cn)("text-on-bg",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)(i.ZB,{className:(0,a.cn)("text-on-bg",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)(i.BT,{className:(0,a.cn)("text-white/70",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)(i.Wu,{className:(0,a.cn)(t),...s})}function u(e){let{className:t,...s}=e;return(0,r.jsx)(i.wL,{className:(0,a.cn)(t),...s})}},5160:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(8081),i=s(2149),a=s(244),n=s(3484),l=s(7687);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:s,variant:i,size:n,asChild:d=!1,...o}=e,u=d?a.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:i,size:n,className:s})),ref:t,...o})});d.displayName="Button"},6810:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>l,wL:()=>u});var r=s(8081),i=s(2149),a=s(7687);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...i})});d.displayName="CardDescription";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...i})});o.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...i})});u.displayName="CardFooter"},7687:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(6522),i=s(4483);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}},7849:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1018).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9076:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1018).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[1144,928,497,954,7358],()=>t(4701)),_N_E=e.O()}]);