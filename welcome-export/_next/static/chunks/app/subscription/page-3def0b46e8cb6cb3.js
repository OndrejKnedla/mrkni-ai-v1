(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6626],{1888:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>o});var i=t(8081),s=t(2149),a=t(4134);let n=(0,s.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[c,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await a.N.auth.getSession();o((null==e?void 0:e.user)||null)}catch(e){console.error("Error checking session:",e)}finally{l(!1)}})();let{data:{subscription:e}}=a.N.auth.onAuthStateChange((e,r)=>{o((null==r?void 0:r.user)||null)});return()=>{e.unsubscribe()}},[]);let d=async()=>{try{console.log("Starting Google sign-in process...");let e="".concat(window.location.protocol,"//").concat(window.location.host);console.log("Using base URL for redirect: ".concat(e));let{data:r,error:t}=await a.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(e,"/auth/callback"),queryParams:{access_type:"offline",prompt:"consent"},scopes:"email profile"}});if(t)throw console.error("Google sign-in error:",t),t;console.log("Sign in initiated successfully, redirecting to Google",r)}catch(e){throw console.error("Error in signInWithGoogle:",e),e}},u=async(e,r)=>{let{error:t}=await a.N.auth.signInWithPassword({email:e,password:r});if(t)throw t},h=async(e,r)=>{let{error:t}=await a.N.auth.signUp({email:e,password:r});if(t)throw t},m=async()=>{let{error:e}=await a.N.auth.signOut();if(e)throw e};return(0,i.jsx)(n.Provider,{value:{user:t,loading:c,signInWithGoogle:d,signIn:u,signUp:h,signOut:m},children:r})}let c=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},4134:(e,r,t)=>{"use strict";t.d(r,{N:()=>i});let i=(0,t(5331).createBrowserClient)("https://akqpnxofeitmzittndll.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrcXBueG9mZWl0bXppdHRuZGxsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxMzcxMjYsImV4cCI6MjA1OTcxMzEyNn0.vVH5D_odlSVOCOZ3BHfkxbDvhuOd_S3e05bQHqUR_pc",{})},4213:(e,r,t)=>{"use strict";t.d(r,{R:()=>h,SubscriptionProvider:()=>u});var i=t(8081),s=t(2149),a=t(1888),n=t(4134);let o={basic:"price_1RDqFlRqLoid5jEQzUlyWITJ",pro:"price_1RDqFlRqLoid5jEQproTierPriceID",premium:"price_1RDqFlRqLoid5jEQlynXnhew"},c={tier:"free",active:!0,expiresAt:null,credits:50,creditDiscount:0,aiVersion:"1.0"},l=[{id:"free",name:"Free",description:"Basic access with limited generations",price:0,features:["50 credits","Access to MrkniAI 1.0","Community support","Standard quality"],tier:"free",credits:50,creditDiscount:0,aiVersion:"1.0"},{id:"basic",name:"Basic",description:"More generations with higher quality",price:9.99,features:["1250 credits monthly","10% credit savings","Access to MrkniAI 1.0","Priority support","High quality"],tier:"basic",credits:1250,creditDiscount:10,aiVersion:"1.0"},{id:"premium",name:"Premium",description:"Advanced generations with premium quality",price:29.99,features:["4000 credits monthly","20% credit savings","Access to MrkniAI 1.5","Priority support","Premium quality","Early access to new features"],tier:"premium",credits:4e3,creditDiscount:20,aiVersion:"1.5"},{id:"pro",name:"Pro",description:"Professional generations with highest quality",price:49.99,features:["10000 credits monthly","40% credit savings","Access to MrkniAI 2.0 and 2.5","Priority support","Highest quality","Access to exclusive models"],tier:"pro",credits:1e4,creditDiscount:40,aiVersion:"2.0, 2.5"}],d=(0,s.createContext)(void 0);function u(e){let{children:r}=e,{user:t}=(0,a.A)(),[u,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{t?p():(h(c),x(!1))},[t]);let p=async()=>{try{if(x(!0),!t){h(c);return}let{data:e,error:r}=await n.N.from("subscriptions").select("*").eq("user_id",t.id).eq("status","active").order("created_at",{ascending:!1}).limit(1).single();if(r&&"PGRST116"!==r.code)throw console.error("Error fetching subscription:",r),r;let i=null,s=null;try{let{data:e,error:r}=await n.N.from("credits").select("*").eq("user_id",t.id).single();i=e,s=r}catch(e){console.error("Exception fetching credits:",e),s=e}if(s){console.error("Error fetching credits:",s);try{console.log("Attempting to initialize credits...");let e=await fetch("/api/user/initialize-credits",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let r=await e.json();if(console.log("Credits initialization result:",r),r.initialized){let{data:e,error:r}=await n.N.from("credits").select("*").eq("user_id",t.id).single();r||(i=e,s=null)}}else console.error("Failed to initialize credits:",await e.json())}catch(e){console.error("Error initializing credits:",e)}}if(s&&(console.warn("Using default credits after initialization attempt failed"),i={credits:50}),e){let r=e.tier,t=l.find(e=>e.tier===r)||l[0];h({tier:r,active:!0,expiresAt:e.current_period_end,credits:(null==i?void 0:i.credits)||t.credits,creditDiscount:t.creditDiscount,aiVersion:t.aiVersion})}else if(i){let e=l.find(e=>"free"===e.tier)||l[0];h({tier:"free",active:!0,expiresAt:null,credits:i.credits,creditDiscount:e.creditDiscount,aiVersion:e.aiVersion})}else h(c)}catch(e){console.error("Error fetching subscription:",e),h(c)}finally{x(!1)}},f=async e=>{try{if(!t)throw Error("User not authenticated");let r=l.find(r=>r.id===e);if(!r)throw Error("Invalid plan selected");let i=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:o[r.tier]})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to create subscription")}await p()}catch(e){console.error("Error subscribing to plan:",e),alert(e instanceof Error?e.message:"Failed to subscribe to plan")}},g=async()=>{try{if(!t)throw Error("User not authenticated");let{data:e,error:r}=await n.N.from("subscriptions").select("id").eq("user_id",t.id).eq("status","active").single();if(r)throw Error("No active subscription found");let i=await fetch("/api/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e.id})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to cancel subscription")}await p()}catch(e){console.error("Error canceling subscription:",e),alert(e instanceof Error?e.message:"Failed to cancel subscription")}},w=async()=>{await p()},y=e=>u?Math.max(0,Math.round(e*(1-u.creditDiscount/100))):e,b=async e=>{try{if(!t||!u)return!1;let r=y(e);if(u.credits<r)return!1;let{data:i,error:s}=await n.N.rpc("decrement_credits",{p_user_id:t.id,p_amount:r});if(s)return console.error("Error using credits:",s),!1;if(!0===i)return h({...u,credits:u.credits-r}),!0;return!1}catch(e){return console.error("Error using credits:",e),!1}};return(0,i.jsx)(d.Provider,{value:{subscription:u,loading:m,plans:l,subscribe:f,cancelSubscription:g,refreshSubscription:w,hasCredits:()=>!!u&&u.credits>0,useCredit:b,calculateDiscountedCredits:y},children:r})}let h=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}},4909:(e,r,t)=>{"use strict";t.d(r,{GlassCard:()=>n,GlassCardContent:()=>d,GlassCardDescription:()=>l,GlassCardHeader:()=>o,GlassCardTitle:()=>c,o:()=>u});var i=t(8081),s=t(6810),a=t(7687);function n(e){let{className:r,...t}=e;return(0,i.jsx)(s.Zp,{className:(0,a.cn)("glass-card",r),...t})}function o(e){let{className:r,...t}=e;return(0,i.jsx)(s.aR,{className:(0,a.cn)("text-on-bg",r),...t})}function c(e){let{className:r,...t}=e;return(0,i.jsx)(s.ZB,{className:(0,a.cn)("text-on-bg",r),...t})}function l(e){let{className:r,...t}=e;return(0,i.jsx)(s.BT,{className:(0,a.cn)("text-white/70",r),...t})}function d(e){let{className:r,...t}=e;return(0,i.jsx)(s.Wu,{className:(0,a.cn)(r),...t})}function u(e){let{className:r,...t}=e;return(0,i.jsx)(s.wL,{className:(0,a.cn)(r),...t})}},4925:(e,r,t)=>{Promise.resolve().then(t.bind(t,6949))},5160:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var i=t(8081),s=t(2149),a=t(244),n=t(3484),o=t(7687);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:l=!1,...d}=e,u=l?a.DX:"button";return(0,i.jsx)(u,{className:(0,o.cn)(c({variant:s,size:n,className:t})),ref:r,...d})});l.displayName="Button"},6810:(e,r,t)=>{"use strict";t.d(r,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>o,wL:()=>u});var i=t(8081),s=t(2149),a=t(7687);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},6949:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var i=t(8081),s=t(2149),a=t(8875),n=t(6810),o=t(5160),c=t(1888),l=t(4213),d=t(2184),u=t(6722),h=t(7950),m=t.n(h),x=t(4909),p=t(8404),f=t(7687);let g=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(p.bL,{className:(0,f.cn)("peer inline-flex h-7 w-14 shrink-0 cursor-pointer items-center rounded-full border-2 border-white/30 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-white/20",t),...s,ref:r,children:(0,i.jsx)(p.zi,{className:(0,f.cn)("pointer-events-none block h-6 w-6 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-7 data-[state=unchecked]:translate-x-0")})})});g.displayName=p.bL.displayName;var w=t(7890),y=t(7216);function b(e){let{credits:r,bonusCredits:t=0,price:s,isFlashSale:a=!1,onPurchase:n}=e,c=r+t;return(0,i.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-white/10 rounded-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"p-4 relative",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(y.A,{className:"h-5 w-5 text-primary mr-2"}),(0,i.jsx)("span",{className:"text-2xl font-bold text-white",children:c}),a&&(0,i.jsx)("span",{className:"ml-auto bg-primary/20 text-primary text-xs px-2 py-1 rounded font-medium",children:"Flash Sale"})]}),t>0&&(0,i.jsxs)("div",{className:"text-xs text-white/70 mt-1",children:["Total: ",r," + ",t," bonus"]}),(0,i.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-20",children:(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-primary",children:(0,i.jsx)("path",{d:"M12 2L4 12H20L12 22V2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,i.jsxs)("div",{className:"p-3 flex items-center justify-between border-t border-white/10",children:[(0,i.jsxs)("span",{className:"text-xl font-bold text-white",children:["$",s]}),(0,i.jsx)(o.$,{size:"sm",className:"bg-primary hover:bg-primary/90 text-white",onClick:()=>n(s,c),children:"Purchase Now"})]})]})}function v(){let{user:e}=(0,c.A)(),{refreshSubscription:r}=(0,l.R)(),[a,n]=(0,s.useState)(!1),[o,u]=(0,s.useState)(null),h=[{credits:330,price:5,bonusCredits:0,isFlashSale:!1},{credits:660,price:10,bonusCredits:0,isFlashSale:!1},{credits:1320,price:20,bonusCredits:0,isFlashSale:!1},{credits:3300,price:50,bonusCredits:200,isFlashSale:!0},{credits:7500,price:100,bonusCredits:1e3,isFlashSale:!0},{credits:16e3,price:200,bonusCredits:2800,isFlashSale:!0},{credits:48e3,price:600,bonusCredits:8400,isFlashSale:!0},{credits:96e3,price:1200,bonusCredits:16800,isFlashSale:!0}],m=async(r,i)=>{if(e){n(!0),u(null);try{let e=await fetch("/api/create-credit-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:r,credits:i,productType:"credits"})});if(!e.ok){let r=await e.json();throw Error(r.error||"API error: ".concat(e.statusText))}let{sessionId:s}=await e.json(),a=await Promise.resolve().then(t.bind(t,8875)).then(e=>e.loadStripe("pk_test_51RDi5IRqLoid5jEQp5XcvFH3TcnRl7W92GooyrTAQctQeWSVLhwxeCnmpWKUQOvWJ0nz2RvufVr9DlaIrKUxF1or00En41LaKd"));if(!a)throw Error("Stripe.js has not loaded yet.");let{error:n}=await a.redirectToCheckout({sessionId:s});if(n)throw Error(n.message||"An unexpected error occurred during checkout redirection.")}catch(e){console.error("Credit purchase failed:",e),u(e instanceof Error?e.message:"An unknown error occurred during checkout.")}finally{n(!1)}}};return(0,i.jsxs)("div",{className:"mt-16",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white drop-shadow-md",children:"Purchase Credits"}),(0,i.jsx)("p",{className:"text-white/70 mt-2 max-w-2xl mx-auto",children:"Get credits to generate images and videos with our advanced AI models."})]}),o&&(0,i.jsx)("div",{className:"my-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded max-w-md mx-auto text-center",children:(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Purchase Error:"})," ",o]})}),a&&(0,i.jsxs)("div",{className:"my-4 text-center",children:[(0,i.jsx)(d.A,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),(0,i.jsx)("p",{className:"mt-2 text-white",children:"Processing your purchase..."})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 max-w-7xl mx-auto",children:h.slice(0,4).map((e,r)=>(0,i.jsx)(b,{credits:e.credits,bonusCredits:e.bonusCredits,price:e.price,isFlashSale:e.isFlashSale,onPurchase:m},r))}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 max-w-7xl mx-auto mt-4",children:h.slice(4).map((e,r)=>(0,i.jsx)(b,{credits:e.credits,bonusCredits:e.bonusCredits,price:e.price,isFlashSale:e.isFlashSale,onPurchase:m},r+4))})]})}let j=(0,a.loadStripe)("pk_test_51RDi5IRqLoid5jEQp5XcvFH3TcnRl7W92GooyrTAQctQeWSVLhwxeCnmpWKUQOvWJ0nz2RvufVr9DlaIrKUxF1or00En41LaKd"),N={basic:{monthly:"price_1RDqFlRqLoid5jEQzUlyWITJ",yearly:"price_1RDqFlRqLoid5jEQbasicYearlyPriceID"},pro:{monthly:"price_1RDqFlRqLoid5jEQproTierPriceID",yearly:"price_1RDqFlRqLoid5jEQproYearlyPriceID"},premium:{monthly:"price_1RDqFlRqLoid5jEQlynXnhew",yearly:"price_1RDqFlRqLoid5jEQpremiumYearlyPriceID"}};function C(){var e;let{user:r,loading:t}=(0,c.A)(),{subscription:a,plans:u,cancelSubscription:h,loading:p}=(0,l.R)(),[f,y]=(0,s.useState)(null),[b,C]=(0,s.useState)(!1),[S,E]=(0,s.useState)(null),[R,A]=(0,s.useState)(!1),F=async e=>{var r,t;E(null);let i=R?"yearly":"monthly",s=null===(r=N[e])||void 0===r?void 0:r[i];if(!s){console.error("Stripe Price ID not found for tier: ".concat(e," (").concat(i,")")),E("Configuration error: Price ID for ".concat(e," ").concat(i," plan not found."));return}y(e);try{let e=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s})});if(!e.ok){let r=await e.json();throw Error(r.error||"API error: ".concat(e.statusText))}let{sessionId:r}=await e.json();if(!r)throw Error("Failed to retrieve session ID from backend.");let i=await j;if(!i)throw Error("Stripe.js has not loaded yet.");let{error:a}=await i.redirectToCheckout({sessionId:r});a&&(console.error("Stripe redirect error:",a),E(null!==(t=a.message)&&void 0!==t?t:"An unexpected error occurred during checkout redirection."))}catch(e){console.error("Checkout failed:",e),E(e instanceof Error?e.message:"An unknown error occurred during checkout."),y(null)}},I=async()=>{if((null==a?void 0:a.active)&&(null==a?void 0:a.tier)!=="free"&&confirm("Are you sure you want to cancel your subscription? You will lose access to premium features.")){C(!0);try{await h()}finally{C(!1)}}};return t||p?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8 flex items-center justify-center min-h-[60vh]",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(d.A,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),(0,i.jsx)("p",{className:"mt-4 text-white drop-shadow-md",children:"Loading subscription details..."})]})}):r?(0,i.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,i.jsxs)("div",{className:"text-center mb-12",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-white drop-shadow-md",children:"Choose Your Plan"}),(0,i.jsx)("p",{className:"text-white/70 mt-2 max-w-2xl mx-auto",children:"Unlock the full potential of MrkniAI with our subscription plans. Generate stunning images and videos with our advanced AI models."}),(0,i.jsxs)("div",{className:"flex items-center justify-center mt-8 space-x-6 bg-white/10 backdrop-blur-md p-5 rounded-lg max-w-md mx-auto shadow-lg",children:[(0,i.jsx)(w.J,{htmlFor:"billing-toggle",className:"text-white text-lg font-medium cursor-pointer transition-colors ".concat(R?"":"text-primary font-bold"),children:"Monthly"}),(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)(g,{id:"billing-toggle",checked:R,onCheckedChange:A})}),(0,i.jsxs)(w.J,{htmlFor:"billing-toggle",className:"text-white text-lg font-medium cursor-pointer flex items-center transition-colors ".concat(R?"text-primary font-bold":""),children:["Yearly",(0,i.jsx)("span",{className:"ml-2 bg-primary text-white text-xs px-3 py-1 rounded-full font-bold",children:"Save 20%"})]})]})]}),S&&(0,i.jsx)("div",{className:"my-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded max-w-md mx-auto text-center",children:(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Checkout Error:"})," ",S]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 max-w-7xl mx-auto",children:u.map(e=>(0,i.jsx)(k,{plan:e,currentTier:(null==a?void 0:a.tier)||"free",onCheckout:F,processing:f===e.tier,isYearly:R},e.id))}),(0,i.jsxs)("div",{className:"mt-16 text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white drop-shadow-md mb-6",children:"Current Subscription"}),(0,i.jsxs)(x.GlassCard,{className:"max-w-md mx-auto",children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsxs)(n.ZB,{className:"text-white",children:[(null===(e=u.find(e=>e.tier===(null==a?void 0:a.tier)))||void 0===e?void 0:e.name)||"Free"," Plan"]}),(0,i.jsxs)(n.BT,{className:"text-white/70",children:[(null==a?void 0:a.active)?"Active":"Inactive",(null==a?void 0:a.expiresAt)&&" • Expires ".concat(new Date(a.expiresAt).toLocaleDateString())]})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-white",children:"Credits:"}),(0,i.jsx)("span",{className:"text-white font-medium",children:(null==a?void 0:a.credits)||0})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-white",children:"Credit Savings:"}),(0,i.jsxs)("span",{className:"text-white font-medium",children:[(null==a?void 0:a.creditDiscount)||0,"%"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-white",children:"AI Version:"}),(0,i.jsx)("span",{className:"text-white font-medium",children:(null==a?void 0:a.aiVersion)||"1.0"})]})]})}),(null==a?void 0:a.tier)!=="free"&&(null==a?void 0:a.active)&&(0,i.jsx)(n.wL,{children:(0,i.jsx)(o.$,{variant:"destructive",className:"w-full",onClick:I,disabled:b,children:b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Canceling..."]}):"Cancel Subscription"})})]})]}),((null==a?void 0:a.tier)==="free"||!a)&&(0,i.jsx)(v,{})]}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8 flex flex-col items-center min-h-[60vh] justify-center",children:(0,i.jsxs)(x.GlassCard,{className:"w-full max-w-md",children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{className:"text-white",children:"Authentication Required"}),(0,i.jsx)(n.BT,{className:"text-white/70",children:"Please sign in to view subscription options"})]}),(0,i.jsx)(n.Wu,{className:"flex justify-center",children:(0,i.jsx)(m(),{href:"/",children:(0,i.jsx)(o.$,{children:"Go to Sign In"})})})]})})}function k(e){let{plan:r,currentTier:t,onCheckout:s,processing:a,isYearly:c}=e,l=r.tier===t,h="free"===r.tier,m={free:0,basic:1,pro:2,premium:3},p=m[t]||0,f=(m[r.tier]||0)<=p;return(0,i.jsxs)(x.GlassCard,{className:"relative flex flex-col ".concat("pro"===r.tier?"border-primary/50 shadow-lg shadow-primary/20":""),children:["pro"===r.tier&&(0,i.jsx)("div",{className:"absolute -top-4 left-0 right-0 flex justify-center",children:(0,i.jsx)("span",{className:"bg-primary text-white text-xs font-bold px-3 py-1 rounded-full",children:"MOST POPULAR"})}),(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{className:"text-white",children:r.name}),(0,i.jsx)(n.BT,{className:"text-white/70",children:r.description}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("span",{className:"text-3xl font-bold text-white",children:["$",c?(12*r.price*.8).toFixed(2):r.price]}),(0,i.jsxs)("span",{className:"text-white/70 ml-1",children:["/",c?"year":"month"]}),c&&r.price>0&&(0,i.jsxs)("div",{className:"text-sm text-primary mt-1",children:["Save $",(12*r.price*.2).toFixed(2)," per year"]})]})]}),(0,i.jsx)(n.Wu,{className:"flex-grow",children:(0,i.jsx)("ul",{className:"space-y-3",children:r.features.map((e,r)=>(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)(u.A,{className:"h-5 w-5 text-primary shrink-0 mr-2"}),(0,i.jsx)("span",{className:"text-white/90",children:e})]},r))})}),(0,i.jsx)(n.wL,{children:(0,i.jsx)(o.$,{className:"w-full ".concat(l||f&&!h?"bg-gray-500 hover:bg-gray-600":""),disabled:l||a||f&&!h||h,onClick:()=>{h||l||f||s(r.tier)},children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):l?"Current Plan":h?"Free Plan":f&&!h?"Cannot Downgrade":"Subscribe"})})]})}},7687:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var i=t(6522),s=t(4483);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,i.$)(r))}},7890:(e,r,t)=>{"use strict";t.d(r,{J:()=>l});var i=t(8081),s=t(2149),a=t(2524),n=t(3484),o=t(7687);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(a.b,{ref:r,className:(0,o.cn)(c(),t),...s})});l.displayName=a.b.displayName}},e=>{var r=r=>e(e.s=r);e.O(0,[1144,928,7950,8338,497,954,7358],()=>r(4925)),_N_E=e.O()}]);